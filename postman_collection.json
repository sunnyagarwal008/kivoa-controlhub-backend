{
  "info": {
    "name": "KIVOA Product Management API",
    "description": "Complete API collection for KIVOA Product Management Backend - includes Health, S3, Products, Categories, and Image Management endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/health",
              "host": ["{{base_url}}"],
              "path": ["api", "health"]
            },
            "description": "Check if the API is running"
          }
        }
      ]
    },
    {
      "name": "S3",
      "item": [
        {
          "name": "Generate Presigned URL",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"filename\": \"product_image.jpg\",\n    \"content_type\": \"image/jpeg\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/presigned-url",
              "host": ["{{base_url}}"],
              "path": ["api", "presigned-url"]
            },
            "description": "Generate a presigned URL for uploading images to S3. Supported content types: image/jpeg, image/jpg, image/png, image/gif, image/webp"
          }
        }
      ]
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/categories",
              "host": ["{{base_url}}"],
              "path": ["api", "categories"]
            },
            "description": "Get all categories ordered by name"
          }
        },
        {
          "name": "Create Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Electronics\",\n    \"prefix\": \"ELEC\",\n    \"tags\": \"wireless,bluetooth,premium\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/categories",
              "host": ["{{base_url}}"],
              "path": ["api", "categories"]
            },
            "description": "Create a new category. Name and prefix must be unique. Tags are optional comma-separated strings."
          }
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Electronics Updated\",\n    \"tags\": \"wireless,bluetooth,premium,new\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/categories/1",
              "host": ["{{base_url}}"],
              "path": ["api", "categories", "1"]
            },
            "description": "Update an existing category. All fields are optional (partial update supported)."
          }
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/categories/1",
              "host": ["{{base_url}}"],
              "path": ["api", "categories", "1"]
            },
            "description": "Delete a category. Cannot delete if it has associated products."
          }
        }
      ]
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Bulk Create Products",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"products\": [\n        {\n            \"category\": \"Electronics\",\n            \"purchase_month\": \"0124\",\n            \"raw_image\": \"https://your-bucket.s3.us-east-1.amazonaws.com/products/uuid1.jpg\",\n            \"mrp\": 1000.00,\n            \"price\": 850.00,\n            \"discount\": 150.00,\n            \"gst\": 18.00,\n            \"price_code\": \"ABC123\",\n            \"tags\": \"wireless,bluetooth\",\n            \"box_number\": 42,\n            \"is_raw_image\": true\n        },\n        {\n            \"category\": \"Clothing\",\n            \"purchase_month\": \"0124\",\n            \"raw_image\": \"https://your-bucket.s3.us-east-1.amazonaws.com/products/uuid2.jpg\",\n            \"mrp\": 500.00,\n            \"price\": 400.00,\n            \"discount\": 100.00,\n            \"gst\": 12.00,\n            \"is_raw_image\": false\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/products/bulk",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "bulk"]
            },
            "description": "Create multiple products in a single request (max 100 products). If is_raw_image=true, product is queued for AI processing. If false, image is copied directly to S3 and product is marked as live."
          }
        },
        {
          "name": "Search Products by SKU",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/search?sku=ELEC",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "search"],
              "query": [
                {
                  "key": "sku",
                  "value": "ELEC",
                  "description": "SKU to search for (partial match supported)"
                }
              ]
            },
            "description": "Search products by SKU with partial matching support"
          }
        },
        {
          "name": "Get All Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products?page=1&per_page=10&status=live&excludeOutOfStock=true&sortBy=created_at&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["api", "products"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                },
                {
                  "key": "status",
                  "value": "live",
                  "description": "Filter by status (pending, live, rejected)",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "Electronics",
                  "description": "Filter by category name",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "wireless,bluetooth",
                  "description": "Filter by tags (comma-separated)",
                  "disabled": true
                },
                {
                  "key": "excludeOutOfStock",
                  "value": "true",
                  "description": "Filter out out-of-stock products (true/false)",
                  "disabled": true
                },
                {
                  "key": "minPrice",
                  "value": "100",
                  "description": "Minimum price filter",
                  "disabled": true
                },
                {
                  "key": "maxPrice",
                  "value": "1000",
                  "description": "Maximum price filter",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "created_at",
                  "description": "Sort field (sku_sequence_number, price, created_at)"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order (asc, desc)"
                }
              ]
            },
            "description": "Get all products with optional filtering, sorting, and pagination"
          }
        },
        {
          "name": "Get Product by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1"]
            },
            "description": "Get a single product by ID with category details and images"
          }
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"category\": \"Electronics\",\n    \"purchase_month\": \"0124\",\n    \"raw_image\": \"https://...\",\n    \"mrp\": 1000.00,\n    \"price\": 800.00,\n    \"discount\": 200.00,\n    \"gst\": 18.00,\n    \"price_code\": \"ABC123\",\n    \"tags\": \"wireless,bluetooth,premium\",\n    \"box_number\": 42\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/products/1",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1"]
            },
            "description": "Update an existing product. All fields are optional (partial update supported). Changing category or purchase_month will regenerate the SKU."
          }
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1"]
            },
            "description": "Delete a product by ID"
          }
        },
        {
          "name": "Bulk Update Product Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"product_ids\": [1, 2, 3],\n    \"status\": \"live\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/products/status",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "status"]
            },
            "description": "Bulk update product status for multiple products. Valid status values: live, rejected"
          }
        },
        {
          "name": "Update Product Stock",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"in_stock\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/products/1/stock",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "stock"]
            },
            "description": "Update product stock status. in_stock must be a boolean (true or false)"
          }
        },
        {
          "name": "Generate Product Catalog PDF",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/catalog",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "catalog"]
            },
            "description": "Generate a PDF catalog of all live, in-stock products grouped by category and upload to S3. Returns the public S3 URL."
          }
        }
      ]
    },
    {
      "name": "Product Images",
      "item": [
        {
          "name": "Generate Product Image",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/generate-image",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "generate-image"],
              "query": [
                {
                  "key": "prompt_type",
                  "value": "model_hand",
                  "description": "Optional: Type filter for prompts (e.g., model_hand, satin, mirror)",
                  "disabled": true
                },
                {
                  "key": "prompt_text",
                  "value": "Create a professional product image with elegant lighting",
                  "description": "Optional: Custom prompt text. If provided, this will be used instead of DB prompts",
                  "disabled": true
                }
              ]
            },
            "description": "Generate a new product image using AI. If prompt_text is provided, uses that custom prompt. Otherwise, queries prompts from database based on product category and optional prompt_type, then randomly selects one. Generated image is saved to S3 and product_images table with status 'pending'."
          }
        },
        {
          "name": "Generate Product Image (Custom Prompt)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/generate-image?prompt_text=Create a professional product image with elegant lighting and soft shadows",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "generate-image"],
              "query": [
                {
                  "key": "prompt_text",
                  "value": "Create a professional product image with elegant lighting and soft shadows",
                  "description": "Custom prompt text for image generation"
                }
              ]
            },
            "description": "Generate a product image using a custom prompt text"
          }
        },
        {
          "name": "Generate Product Image (DB Prompts with Type)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/generate-image?prompt_type=model_hand",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "generate-image"],
              "query": [
                {
                  "key": "prompt_type",
                  "value": "model_hand",
                  "description": "Filter prompts by type (e.g., model_hand, satin, mirror)"
                }
              ]
            },
            "description": "Generate a product image using prompts from database filtered by category and type. Randomly selects one matching prompt."
          }
        },
        {
          "name": "Generate Product Image (DB Prompts Random)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/generate-image",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "generate-image"]
            },
            "description": "Generate a product image using prompts from database for the product's category. Randomly selects one prompt from all active prompts for that category."
          }
        },
        {
          "name": "Approve Product Image",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/images/1/approve",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "images", "1", "approve"]
            },
            "description": "Approve a product image. Sets image status to 'approved'."
          }
        },
        {
          "name": "Reject Product Image",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/products/1/images/1/reject",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "images", "1", "reject"]
            },
            "description": "Reject and delete a product image from both database and S3."
          }
        },
        {
          "name": "Update Image Status (Generic)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"approved\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/products/1/images/1/status",
              "host": ["{{base_url}}"],
              "path": ["api", "products", "1", "images", "1", "status"]
            },
            "description": "Update product image status. Valid values: pending, approved, rejected"
          }
        }
      ]
    },
    {
      "name": "Raw Images",
      "item": [
        {
          "name": "Get All Raw Images",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/raw-images?page=1&per_page=10&sortBy=created_at&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["api", "raw-images"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number (default: 1)"
                },
                {
                  "key": "per_page",
                  "value": "10",
                  "description": "Items per page (default: 10)"
                },
                {
                  "key": "sortBy",
                  "value": "created_at",
                  "description": "Sort field (id, created_at)"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order (asc, desc)"
                }
              ]
            },
            "description": "Get all raw images with pagination and sorting support"
          }
        },
        {
          "name": "Bulk Create Raw Images",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"raw_images\": [\n        {\n            \"image_url\": \"https://example.com/image1.jpg\"\n        },\n        {\n            \"image_url\": \"https://example.com/image2.jpg\"\n        },\n        {\n            \"image_url\": \"https://example.com/image3.jpg\"\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/raw-images/bulk",
              "host": ["{{base_url}}"],
              "path": ["api", "raw-images", "bulk"]
            },
            "description": "Bulk create raw images (max 1000 per request). Duplicate URLs are automatically skipped."
          }
        }
      ]
    },
    {
      "name": "Prompts",
      "item": [
        {
          "name": "Get All Prompts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/prompts?sortBy=created_at&sortOrder=desc",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts"],
              "query": [
                {
                  "key": "category",
                  "value": "necklace",
                  "description": "Filter by category name (e.g., necklace, ring, earring)",
                  "disabled": true
                },
                {
                  "key": "category_id",
                  "value": "1",
                  "description": "Filter by category ID",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "model_hand",
                  "description": "Filter by type (e.g., model_hand, satin, mirror)",
                  "disabled": true
                },
                {
                  "key": "is_active",
                  "value": "true",
                  "description": "Filter by active status (true/false)",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "fashion,luxury",
                  "description": "Filter by tags (comma-separated)",
                  "disabled": true
                },
                {
                  "key": "sortBy",
                  "value": "created_at",
                  "description": "Sort field (id, category_id, type, created_at, updated_at)"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order (asc, desc)"
                }
              ]
            },
            "description": "Get all prompts with optional filtering and sorting. Supports filtering by category name, category_id, type, is_active, and tags."
          }
        },
        {
          "name": "Get Prompts by Category",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/prompts?category=necklace&is_active=true",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts"],
              "query": [
                {
                  "key": "category",
                  "value": "necklace",
                  "description": "Filter by category name"
                },
                {
                  "key": "is_active",
                  "value": "true",
                  "description": "Only active prompts"
                }
              ]
            },
            "description": "Get all prompts for a specific category (e.g., necklace, ring, earring)"
          }
        },
        {
          "name": "Get Ring Prompts by Type",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/prompts?category=ring&type=model_hand&is_active=true",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts"],
              "query": [
                {
                  "key": "category",
                  "value": "ring",
                  "description": "Filter by category"
                },
                {
                  "key": "type",
                  "value": "model_hand",
                  "description": "Filter by type (model_hand, satin, mirror)"
                },
                {
                  "key": "is_active",
                  "value": "true",
                  "description": "Only active prompts"
                }
              ]
            },
            "description": "Get ring prompts filtered by type (model_hand, satin, or mirror)"
          }
        },
        {
          "name": "Get Single Prompt",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/prompts/1",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "1"]
            },
            "description": "Get a single prompt by ID. Returns prompt with category details."
          }
        },
        {
          "name": "Create Prompt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"A high-resolution fashion photography portrait of a stunning female model wearing a necklace...\",\n    \"category\": \"necklace\",\n    \"type\": null,\n    \"tags\": \"fashion,luxury,editorial\",\n    \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts"]
            },
            "description": "Create a new prompt. Category must exist in the categories table. Type and tags are optional."
          }
        },
        {
          "name": "Create Ring Prompt",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"A close-up of a model's hand wearing a luxury ring...\",\n    \"category\": \"ring\",\n    \"type\": \"model_hand\",\n    \"tags\": \"ring,model,hand,luxury\",\n    \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts"]
            },
            "description": "Create a ring prompt with type (model_hand, satin, or mirror)"
          }
        },
        {
          "name": "Update Prompt",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"Updated prompt text...\",\n    \"is_active\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts/1",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "1"]
            },
            "description": "Update an existing prompt. All fields are optional. Can update text, category, type, tags, or is_active status."
          }
        },
        {
          "name": "Update Prompt Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"category\": \"earring\",\n    \"type\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts/1",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "1"]
            },
            "description": "Update prompt category and type. Category must exist in the categories table."
          }
        },
        {
          "name": "Disable Prompt",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"is_active\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts/1",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "1"]
            },
            "description": "Disable a prompt without deleting it. Set is_active to false."
          }
        },
        {
          "name": "Delete Prompt",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/prompts/1",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "1"]
            },
            "description": "Permanently delete a prompt by ID"
          }
        },
        {
          "name": "Bulk Create Prompts",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"prompts\": [\n        {\n            \"text\": \"Necklace prompt 1...\",\n            \"category\": \"necklace\",\n            \"tags\": \"fashion,luxury\"\n        },\n        {\n            \"text\": \"Ring prompt on model hand...\",\n            \"category\": \"ring\",\n            \"type\": \"model_hand\",\n            \"tags\": \"ring,model,luxury\"\n        },\n        {\n            \"text\": \"Ring prompt on satin...\",\n            \"category\": \"ring\",\n            \"type\": \"satin\",\n            \"tags\": \"ring,satin,luxury\"\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/prompts/bulk",
              "host": ["{{base_url}}"],
              "path": ["api", "prompts", "bulk"]
            },
            "description": "Bulk create prompts (max 1000 per request). All categories must exist in the categories table."
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5000",
      "type": "string"
    }
  ]
}

